<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TotalEnergies – Matrix Code</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #000;
      color: #fff;
    }

    canvas#matrix {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
      z-index: 0;
    }

    .overlay {
      position: relative;
      z-index: 1;
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 40px;
      box-sizing: border-box;
      text-align: center;
    }

    .title-main {
      font-weight: 700;
      color: #ff3333;
      font-size: 1.4rem;
      margin-bottom: 8px;
    }

    .title-sub {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 24px;
    }

    .grid-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      width: 100%;
      max-width: 320px;
      padding: 0 16px;
      box-sizing: border-box;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      width: 100%;
    }

    .cell {
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #ffff00;
      border-radius: 8px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 700;
      color: #ffff66;
      box-shadow: 0 0 10px rgba(255, 255, 0, 0.5);
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
      user-select: none;
    }

    .cell:active {
      transform: scale(0.96);
    }

    .cell.selected {
      background: rgba(255, 255, 0, 0.2);
      box-shadow: 0 0 16px rgba(255, 255, 0, 0.9);
    }

    .status {
      font-size: 0.95rem;
      min-height: 22px;
    }

    .status-ok {
      color: #00ff66;
      font-weight: 700;
    }

    .status-error {
      color: #ff4444;
      font-weight: 700;
    }

    .code-display {
      font-size: 1.1rem;
      letter-spacing: 0.2rem;
      margin-bottom: 4px;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 4px;
    }

    button {
      border: none;
      padding: 10px 18px;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      background: #ffff00;
      color: #000;
      box-shadow: 0 0 10px rgba(255, 255, 0, 0.6);
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
    }

    button:active {
      transform: scale(0.96);
      box-shadow: 0 0 4px rgba(255, 255, 0, 0.4);
    }

    button.secondary {
      background: #222;
      color: #ffff00;
      border: 1px solid #ffff00;
      box-shadow: 0 0 6px rgba(255, 255, 0, 0.4);
    }

    @media (min-height: 700px) {
      .overlay {
        padding-top: 60px;
      }
      .cell {
        height: 72px;
      }
    }
  </style>
</head>
<body>
  <canvas id="matrix"></canvas>

  <div class="overlay">
    <div class="title-main"><strong>TOTAL ENERGIES</strong></div>
    <div class="title-sub">TEAM BUILDING DRM</div>

    <div class="grid-container">
      <div class="grid">
        <div class="cell" data-digit="4">4</div>
        <div class="cell" data-digit="0">0</div>
        <div class="cell" data-digit="7">7</div>

        <div class="cell" data-digit="3">3</div>
        <div class="cell" data-digit="6">6</div>
        <div class="cell" data-digit="1">1</div>

        <div class="cell" data-digit="8">8</div>
        <div class="cell" data-digit="2">2</div>
        <div class="cell" data-digit="5">5</div>
      </div>

      <div class="code-display" id="currentCode">_ _ _</div>
      <div class="status" id="statusMessage"></div>

      <div class="buttons">
        <button id="checkBtn">Valider le code</button>
        <button class="secondary" id="resetBtn">Réinitialiser</button>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("matrix");
    const ctx = canvas.getContext("2d");

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);

    const letters = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const fontSize = 16;
    let columns = Math.floor(canvas.width / fontSize);
    let drops = [];
    for (let i = 0; i < columns; i++) drops[i] = Math.random() * canvas.height / fontSize;

    function drawMatrix() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.15)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = "#ffff66";
      ctx.font = fontSize + "px monospace";

      for (let i = 0; i < drops.length; i++) {
        const text = letters.charAt(Math.floor(Math.random() * letters.length));
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);

        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
      }
      requestAnimationFrame(drawMatrix);
    }
    drawMatrix();

    const cells = document.querySelectorAll(".cell");
    const currentCodeEl = document.getElementById("currentCode");
    const statusMessageEl = document.getElementById("statusMessage");
    const checkBtn = document.getElementById("checkBtn");
    const resetBtn = document.getElementById("resetBtn");

    let currentCode = "";

    function updateCodeDisplay() {
      const chars = currentCode.split("");
      currentCodeEl.textContent = [chars[0] || "_", chars[1] || "_", chars[2] || "_"].join(" ");
    }

    function clearSelection() {
      currentCode = "";
      updateCodeDisplay();
      statusMessageEl.textContent = "";
      statusMessageEl.className = "status";
      cells.forEach(c => c.classList.remove("selected"));
    }

    cells.forEach(cell => {
      cell.addEventListener("click", () => {
        if (currentCode.length >= 3) return;
        const digit = cell.getAttribute("data-digit");
        currentCode += digit;
        cell.classList.add("selected");
        updateCodeDisplay();
      });
    });

    checkBtn.addEventListener("click", () => {
      if (currentCode.length !== 3) {
        statusMessageEl.textContent = "Veuillez sélectionner 3 chiffres.";
        statusMessageEl.className = "status status-error";
        return;
      }

      if (currentCode === "467") {
        statusMessageEl.textContent = "CODE BON";
        statusMessageEl.className = "status status-ok";
      } else {
        statusMessageEl.textContent = "ERREUR";
        statusMessageEl.className = "status status-error";
      }
    });

    resetBtn.addEventListener("click", clearSelection);

    updateCodeDisplay();
  </script>
</body>
</html>
